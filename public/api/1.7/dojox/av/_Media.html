<div class="jsdoc-permalink" style="display:none;">/api/1.7/dojox/av/_Media</div><h1 class="jsdoc-title constructorIcon36">dojox.av._Media <span style="font-size:11px;color:#999;">(version 1.7)</span></h1><div class="jsdoc-prototype">Object &raquo; dojox.av._Media</div><div class="jsdoc-require">dojo.require("dojox.av._Media");</div><div class="jsdoc-prototype">Defined in dojox/av/_Media.js</div><div class="jsdoc-function-information"><h3>Usage:</h3><div class="function-signature"><span class="keyword">var</span> foo = new dojox.av._Media();</div></div><div class="jsdoc-full-summary"><p>Calculates the current status of the playing media and fires
the appropriate events.</p>
</div><div class="jsdoc-children"><div class="jsdoc-field-list"><h2 class="jsdoc-summary-heading">Method Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited even"><a class="inline-link" href="#_eventFactory">_eventFactory</a><span class="parameters">()</span><span class="jsdoc-returns"> returns Object</span> <span>Creates a generic event object.</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_figureStatus">_figureStatus</a><span class="parameters">()</span> <span>Calculate media status, based on playhead movement, and
	onStop and onStart events
	TODO:
	Figure in real status from the media for more accurate results.</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_initStatus">_initStatus</a><span class="parameters">()</span> <span>Connect mediaStatus to the media.</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_normalizeUrl">_normalizeUrl</a><span class="parameters">(_url)</span> <span>Checks that path is relative to HTML file or
	convertes it to an absolute path.</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_normalizeVolume">_normalizeVolume</a><span class="parameters">(vol)</span> <span>Ensures volume is less than one</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_sub">_sub</a><span class="parameters">(topic, method)</span> <span>helper for subscribing to topics</span></li><li class="functionIcon public  even"><a class="inline-link" href="#constructor">constructor</a><span class="parameters">()</span><span class="jsdoc-returns"> returns dojox.av._Media</span> <span>A reference to the constructor function for this object.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#destroy">destroy</a><span class="parameters">()</span> <span>destroys flash</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#getTime">getTime</a><span class="parameters">()</span><span class="jsdoc-returns"> returns Float</span> <span>Returns the current time of the video
	Note:
	Consider the onPosition event, which returns
	the time at a set interval. Too many trips to
	the SWF could impact performance.</span></li></ul></div><h2 class="jsdoc-summary-heading">Event Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon public inherited odd"><a class="inline-link" href="#onBuffer">onBuffer</a><span class="parameters">(isBuffering)</span> <span>Fires a boolean to tell if media
	is paused for buffering or if buffering
	has finished</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onClick">onClick</a><span class="parameters">(evt)</span> <span>TODO: Return x/y of click
	Fires when the player is clicked
	Could be used to toggle play/pause, or
	do an external activity, like opening a new
	window.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onDownloaded">onDownloaded</a><span class="parameters">(percent)</span> <span>Fires the amount of that the media has been
	downloaded. Number, 0-100</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onEnd">onEnd</a><span class="parameters">(data)</span> <span>Fires when video ends
	Could be used to change pause button to play
	or show a post video graphic, like YouTube</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onError">onError</a><span class="parameters">(data, url)</span> <span>Fired when the player encounters an error</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onLoad">onLoad</a><span class="parameters">(mov)</span> <span>Fired when the SWF player has loaded
	NOT when the video has loaded</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onMetaData">onMetaData</a><span class="parameters">(data, evt)</span> <span>The video properties. Width, height, duration, etc.
	NOTE: 	if data is empty, this is an older FLV with no meta data.
	Duration cannot be determined. In original FLVs, duration
	could only be obtained with Flash Media Server.
	NOTE: 	Older FLVs can still return width and height
	and will do so on a second event call</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onPause">onPause</a><span class="parameters">(data)</span> <span>Fires when the pause button is clicked</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onPlay">onPlay</a><span class="parameters">(data)</span> <span>Fires when video starts and resumes</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onPlayerStatus">onPlayerStatus</a><span class="parameters">(data)</span> <span>The status of the video from the SWF
	playing, stopped, bufering, etc.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onPosition">onPosition</a><span class="parameters">(time)</span> <span>The position of the playhead in seconds</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onResize">onResize</a><span class="parameters">()</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onStart">onStart</a><span class="parameters">(data)</span> <span>Fires when video starts
	Good for setting the play button to pause
	during an autoPlay for example</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onStatus">onStatus</a><span class="parameters">(data)</span> <span>Simple status</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onStop">onStop</a><span class="parameters">()</span> <span>Fire when the Stop button is clicked
	TODO: 	This is not hooked up yet and shouldn't
	fire.</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onSwfSized">onSwfSized</a><span class="parameters">(data)</span> <span>Fired on SWF resize, or when its
	toggled between fullscreen.</span></li></ul></div></div></div><div class="jsdoc-children"><div class="jsdoc-fields"><h2>Methods</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_eventFactory"></a><span class="functionIcon">_eventFactory</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-return-type">Returns <strong>Object</strong></div><div class="jsdoc-summary">Creates a generic event object.</div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_figureStatus"></a><span class="functionIcon">_figureStatus</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Calculate media status, based on playhead movement, and
	onStop and onStart events
	TODO:
	Figure in real status from the media for more accurate results.</div></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_initStatus"></a><span class="functionIcon">_initStatus</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Connect mediaStatus to the media.</div></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_normalizeUrl"></a><span class="functionIcon">_normalizeUrl</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Checks that path is relative to HTML file or
	convertes it to an absolute path.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">_url</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_normalizeVolume"></a><span class="functionIcon">_normalizeVolume</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Ensures volume is less than one</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">vol</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_sub"></a><span class="functionIcon">_sub</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">helper for subscribing to topics</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">topic</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">method</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="constructor"></a><span class="functionIcon">constructor</span></div><div class="jsdoc-inheritance">Overrides <a class="jsdoc-link" href="/api/1.7/Object">Object</a></div><div class="jsdoc-return-type">Returns <strong>dojox.av._Media</strong></div><div class="jsdoc-summary">A reference to the constructor function for this object.</div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="destroy"></a><span class="functionIcon">destroy</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">destroys flash</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="getTime"></a><span class="functionIcon">getTime</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-return-type">Returns <strong>Float</strong></div><div class="jsdoc-summary">Returns the current time of the video
	Note:
	Consider the onPosition event, which returns
	the time at a set interval. Too many trips to
	the SWF could impact performance.</div></div><h2>Events</h2><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onBuffer"></a><span class="functionIcon">onBuffer</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires a boolean to tell if media
	is paused for buffering or if buffering
	has finished</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">isBuffering</td><td class="jsdoc-param-type">Boolean</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onClick"></a><span class="functionIcon">onClick</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">TODO: Return x/y of click
	Fires when the player is clicked
	Could be used to toggle play/pause, or
	do an external activity, like opening a new
	window.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">evt</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onDownloaded"></a><span class="functionIcon">onDownloaded</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires the amount of that the media has been
	downloaded. Number, 0-100</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">percent</td><td class="jsdoc-param-type">Number</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onEnd"></a><span class="functionIcon">onEnd</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires when video ends
	Could be used to change pause button to play
	or show a post video graphic, like YouTube</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onError"></a><span class="functionIcon">onError</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fired when the player encounters an error</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">url</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"></td></tr></table><div class="jsdoc-examples"><div class="jsdoc-example"><div><strong>Example 1</strong></div>
 console.warn("ERROR-"+data.type.toUpperCase()+":",
<pre class="brush: js;" lang="javascript">
		data.info.code, &quot; - URL:&quot;, url);
</pre></div></div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onLoad"></a><span class="functionIcon">onLoad</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fired when the SWF player has loaded
	NOT when the video has loaded</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">mov</td><td class="jsdoc-param-type">SWF</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onMetaData"></a><span class="functionIcon">onMetaData</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">The video properties. Width, height, duration, etc.
	NOTE: 	if data is empty, this is an older FLV with no meta data.
	Duration cannot be determined. In original FLVs, duration
	could only be obtained with Flash Media Server.
	NOTE: 	Older FLVs can still return width and height
	and will do so on a second event call</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">evt</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onPause"></a><span class="functionIcon">onPause</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires when the pause button is clicked</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onPlay"></a><span class="functionIcon">onPlay</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires when video starts and resumes</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onPlayerStatus"></a><span class="functionIcon">onPlayerStatus</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">The status of the video from the SWF
	playing, stopped, bufering, etc.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onPosition"></a><span class="functionIcon">onPosition</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">The position of the playhead in seconds</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">time</td><td class="jsdoc-param-type">Float</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onResize"></a><span class="functionIcon">onResize</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onStart"></a><span class="functionIcon">onStart</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fires when video starts
	Good for setting the play button to pause
	during an autoPlay for example</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onStatus"></a><span class="functionIcon">onStatus</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Simple status</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onStop"></a><span class="functionIcon">onStop</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fire when the Stop button is clicked
	TODO: 	This is not hooked up yet and shouldn't
	fire.</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onSwfSized"></a><span class="functionIcon">onSwfSized</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dojox/av/_Media">dojox.av._Media</a></div><div class="jsdoc-summary">Fired on SWF resize, or when its
	toggled between fullscreen.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">data</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"></td></tr></table></div></div></div>