<div class="jsdoc-permalink" style="display:none;">/api/1.7/dijit/tree/dndSource</div><h1 class="jsdoc-title constructorIcon36">dijit.tree.dndSource <span style="font-size:11px;color:#999;">(version 1.7)</span></h1><div class="jsdoc-prototype">Object &raquo; <a class="jsdoc-link" href="/api/1.7/_dndSelector">_dndSelector</a> &raquo; dijit.tree.dndSource</div><div class="jsdoc-require">dojo.require("dijit.tree.dndSource");</div><div class="jsdoc-prototype">Defined in dijit/tree/dndSource.js</div><div class="jsdoc-function-information"><h3>Usage:</h3><div class="function-signature"><span class="keyword">var</span> foo = new dijit.tree.dndSource(<span class="jsdoc-comment-type">/* dijit.Tree */</span> tree, <span class="jsdoc-comment-type">/* dijit.tree.__SourceArgs */</span> params);</div></div><div class="jsdoc-full-summary"><p>Handles drag and drop operations (as a source or a target) for <code>dijit.Tree</code></p>
</div><div class="jsdoc-children"><div class="jsdoc-field-list"><h2 class="jsdoc-summary-heading">Property Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="objectIcon public inherited even"><a class="inline-link" href="#tree">tree</a></li></ul></div><h2 class="jsdoc-summary-heading">Method Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited odd"><a class="inline-link" href="#_isParentChildDrop">_isParentChildDrop</a><span class="parameters">(source, targetRow)</span> <span>Checks whether the dragged items are parent rows in the tree which are being
	dragged into their own children.</span></li><li class="functionIcon private inherited even"><a class="inline-link" href="#_markDndStatus">_markDndStatus</a><span class="parameters">(copy)</span> <span>Changes source's state based on &quot;copy&quot; status</span></li><li class="functionIcon private inherited odd"><a class="inline-link" href="#_unmarkTargetAnchor">_unmarkTargetAnchor</a><span class="parameters">()</span> <span>Removes hover class of the current target anchor</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#checkAcceptance">checkAcceptance</a><span class="parameters">(source, nodes)</span><span class="jsdoc-returns"> returns Boolean</span> <span>Checks if the target can accept nodes from this source</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#checkItemAcceptance">checkItemAcceptance</a><span class="parameters">(target, source, position)</span> <span>Stub function to be overridden if one wants to check for the ability to drop at the node/item level</span></li><li class="functionIcon public  even"><a class="inline-link" href="#constructor">constructor</a><span class="parameters">(tree, params)</span><span class="jsdoc-returns"> returns dijit.tree.dndSource</span> <span>a constructor of the Tree DnD Source</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#copyState">copyState</a><span class="parameters">(keyPressed)</span><span class="jsdoc-returns"> returns Boolean</span> <span>Returns true, if we need to copy items, false to move.
	It is separated to be overwritten dynamically, if needed.</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#destroy">destroy</a><span class="parameters">()</span> <span>Prepares the object to be garbage-collected.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#itemCreator">itemCreator</a><span class="parameters">(nodes, target, source)</span> <span>Returns objects passed to `Tree.model.newItem()` based on DnD nodes
	dropped onto the tree.   Developer must override this method to enable
	dropping from external sources onto this Tree, unless the Tree.model's items
	happen to look like {id: 123, name: &quot;Apple&quot; } with no other attributes.</span></li></ul></div><h2 class="jsdoc-summary-heading">Event Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private inherited even"><a class="inline-link" href="#_onDragMouse">_onDragMouse</a><span class="parameters">(e)</span> <span>Helper method for processing onmousemove/onmouseover events while drag is in progress.
	Keeps track of current drop target.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onDndCancel">onDndCancel</a><span class="parameters">()</span> <span>Topic event processor for /dnd/cancel, called to cancel the DnD operation</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onDndDrop">onDndDrop</a><span class="parameters">(source, nodes, copy)</span> <span>Topic event processor for /dnd/drop, called to finish the DnD operation.</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onDndSourceOver">onDndSourceOver</a><span class="parameters">(source)</span> <span>Topic event processor for /dnd/source/over, called when detected a current source.</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onDndStart">onDndStart</a><span class="parameters">(source, nodes, copy)</span> <span>Topic event processor for /dnd/start, called to initiate the DnD operation</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onMouseDown">onMouseDown</a><span class="parameters">(e)</span> <span>Event processor for onmousedown/ontouchstart</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onMouseMove">onMouseMove</a><span class="parameters">(e)</span> <span>Called for any onmousemove/ontouchmove events over the Tree</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onMouseOut">onMouseOut</a><span class="parameters">()</span> <span>Event processor for when mouse is moved away from a TreeNode</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onMouseUp">onMouseUp</a><span class="parameters">(e)</span> <span>Event processor for onmouseup/ontouchend</span></li><li class="functionIcon public inherited odd"><a class="inline-link" href="#onOutEvent">onOutEvent</a><span class="parameters">()</span> <span>This method is called when mouse is moved out of our container (like onmouseleave)</span></li><li class="functionIcon public inherited even"><a class="inline-link" href="#onOverEvent">onOverEvent</a><span class="parameters">()</span> <span>This method is called when mouse is moved over our container (like onmouseenter)</span></li></ul></div><h2 class="jsdoc-summary-heading">Attached Objects <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><div class="jsdoc-field"><div class="jsdoc-title"><span class="object"><a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource/tree">dijit.tree.dndSource.tree</a></span></div></div></div></div></div><div class="jsdoc-children"><div class="jsdoc-fields"><h2>Properties</h2><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="tree"></a><span class="objectIcon">tree</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div></div><h2>Methods</h2><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_isParentChildDrop"></a><span class="functionIcon">_isParentChildDrop</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Checks whether the dragged items are parent rows in the tree which are being
	dragged into their own children.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">The</td><td class="jsdoc-param-description">DragSource object.</td></tr><tr><td class="jsdoc-param-name">targetRow</td><td class="jsdoc-param-type">The</td><td class="jsdoc-param-description">tree row onto which the dragged nodes are being dropped.</td></tr></table></div><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_markDndStatus"></a><span class="functionIcon">_markDndStatus</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Changes source's state based on &quot;copy&quot; status</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">copy</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private inherited odd"><div class="jsdoc-title"><a name="_unmarkTargetAnchor"></a><span class="functionIcon">_unmarkTargetAnchor</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Removes hover class of the current target anchor</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="checkAcceptance"></a><span class="functionIcon">checkAcceptance</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-return-type">Returns <strong>Boolean</strong></div><div class="jsdoc-summary">Checks if the target can accept nodes from this source</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">dijit.tree.dndSource</td><td class="jsdoc-param-description">The source which provides items</td></tr><tr><td class="jsdoc-param-name">nodes</td><td class="jsdoc-param-type">DOMNode[]</td><td class="jsdoc-param-description">Array of DOM nodes corresponding to nodes being dropped, dijitTreeRow nodes if
	source is a dijit.Tree.</td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="checkItemAcceptance"></a><span class="functionIcon">checkItemAcceptance</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary"><p>In the base case, this is called to check if target can become a child of source.
When betweenThreshold is set, position="before" or "after" means that we
are asking if the source node can be dropped before/after the target node.</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">target</td><td class="jsdoc-param-type">DOMNode</td><td class="jsdoc-param-description">The dijitTreeRoot DOM node inside of the TreeNode that we are dropping on to
	Use dijit.getEnclosingWidget(target) to get the TreeNode.</td></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">dijit.tree.dndSource</td><td class="jsdoc-param-description">The (set of) nodes we are dropping</td></tr><tr><td class="jsdoc-param-name">position</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">&quot;over&quot;, &quot;before&quot;, or &quot;after&quot;</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="constructor"></a><span class="functionIcon">constructor</span></div><div class="jsdoc-inheritance">Overrides <a class="jsdoc-link" href="/api/1.7/Object">Object</a></div><div class="jsdoc-return-type">Returns <strong>dijit.tree.dndSource</strong></div><div class="jsdoc-summary">a constructor of the Tree DnD Source</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">tree</td><td class="jsdoc-param-type">dijit.Tree</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">params</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description"><table class="jsdoc-parameters" style="margin-left:0;margin-right:0;margin-bottom:0;"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></table></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="copyState"></a><span class="functionIcon">copyState</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-return-type">Returns <strong>Boolean</strong></div><div class="jsdoc-summary">Returns true, if we need to copy items, false to move.
	It is separated to be overwritten dynamically, if needed.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">keyPressed</td><td class="jsdoc-param-type">Boolean</td><td class="jsdoc-param-description">The &quot;copy&quot; control key was pressed</td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="destroy"></a><span class="functionIcon">destroy</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Prepares the object to be garbage-collected.</div></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="itemCreator"></a><span class="functionIcon">itemCreator</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-return-type"><div class="jsdoc-return-description">Object[]
	Array of name/value hashes for each new item to be added to the Tree, like:
		[
			{ id: 123, label: "apple", foo: "bar" },
			{ id: 456, label: "pear", zaz: "bam" }
		]</div></div><div class="jsdoc-summary"><p>For each node in nodes[], which came from source, create a hash of name/value
pairs to be passed to Tree.model.newItem().  Returns array of those hashes.</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">nodes</td><td class="jsdoc-param-type">DomNode[]</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">target</td><td class="jsdoc-param-type">DomNode</td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">dojo.dnd.Source</td><td class="jsdoc-param-description"></td></tr></table></div><h2>Events</h2><div class="jsdoc-field private inherited even"><div class="jsdoc-title"><a name="_onDragMouse"></a><span class="functionIcon">_onDragMouse</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Helper method for processing onmousemove/onmouseover events while drag is in progress.
	Keeps track of current drop target.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">e</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onDndCancel"></a><span class="functionIcon">onDndCancel</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Topic event processor for /dnd/cancel, called to cancel the DnD operation</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onDndDrop"></a><span class="functionIcon">onDndDrop</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary"><p>Updates data store items according to where node was dragged from and dropped
to.   The tree will then respond to those data store updates and redraw itself.</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">The dijit.tree.dndSource / dojo.dnd.Source which is providing the items</td></tr><tr><td class="jsdoc-param-name">nodes</td><td class="jsdoc-param-type">DomNode[]</td><td class="jsdoc-param-description">The list of transferred items, dndTreeNode nodes if dragging from a Tree</td></tr><tr><td class="jsdoc-param-name">copy</td><td class="jsdoc-param-type">Boolean</td><td class="jsdoc-param-description">Copy items, if true, move items otherwise</td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onDndSourceOver"></a><span class="functionIcon">onDndSourceOver</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Topic event processor for /dnd/source/over, called when detected a current source.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">The dijit.tree.dndSource / dojo.dnd.Source which has the mouse over it</td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onDndStart"></a><span class="functionIcon">onDndStart</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Topic event processor for /dnd/start, called to initiate the DnD operation</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">source</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">The dijit.tree.dndSource / dojo.dnd.Source which is providing the items</td></tr><tr><td class="jsdoc-param-name">nodes</td><td class="jsdoc-param-type">DomNode[]</td><td class="jsdoc-param-description">The list of transferred items, dndTreeNode nodes if dragging from a Tree</td></tr><tr><td class="jsdoc-param-name">copy</td><td class="jsdoc-param-type">Boolean</td><td class="jsdoc-param-description">Copy items, if true, move items otherwise</td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onMouseDown"></a><span class="functionIcon">onMouseDown</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Event processor for onmousedown/ontouchstart</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">e</td><td class="jsdoc-param-type">Event</td><td class="jsdoc-param-description">onmousedown/ontouchend event</td></tr></table></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onMouseMove"></a><span class="functionIcon">onMouseMove</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Called for any onmousemove/ontouchmove events over the Tree</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">e</td><td class="jsdoc-param-type">Event</td><td class="jsdoc-param-description">onmousemouse/ontouchmove event</td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onMouseOut"></a><span class="functionIcon">onMouseOut</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Event processor for when mouse is moved away from a TreeNode</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onMouseUp"></a><span class="functionIcon">onMouseUp</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">Event processor for onmouseup/ontouchend</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">e</td><td class="jsdoc-param-type">Event</td><td class="jsdoc-param-description">onmouseup/ontouchend event</td></tr></table></div><div class="jsdoc-field public inherited odd"><div class="jsdoc-title"><a name="onOutEvent"></a><span class="functionIcon">onOutEvent</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">This method is called when mouse is moved out of our container (like onmouseleave)</div></div><div class="jsdoc-field public inherited even"><div class="jsdoc-title"><a name="onOverEvent"></a><span class="functionIcon">onOverEvent</span></div><div class="jsdoc-inheritance">Defined by <a class="jsdoc-link" href="/api/1.7/dijit/tree/dndSource">dijit.tree.dndSource</a></div><div class="jsdoc-summary">This method is called when mouse is moved over our container (like onmouseenter)</div></div></div></div>